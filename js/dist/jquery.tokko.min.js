(function(e){function n(n,p){function c(e){window.Modernizr&&Modernizr.touch||(e.css("opacity",p.minAlpha,p.delay),e.on("mouseenter",t.bind(void 0,e,p.maxAlpha,p.delay)).on("mouseleave",a.bind(void 0,e,p.minAlpha,p.delay)))}var h,d=e(":header:not(h1)").map(function(){var n=e(this);parseInt(n.prop("tagName").slice(1),10);var t=n.text(),a=r(t),o=e("<a>",{"class":p.anchor["class"],href:"#"+a}).html(p.anchor.content).appendTo(n);return c(o),n.attr("id",a),n.attr("name",a),{text:t,id:a,depth:parseInt(n.prop("tagName").slice(1),10)}}),l=d[0].depth,u=[n];d.each(function(n,t){t.depth>l?u.push(e("<ul>").appendTo(h)):l>t.depth&&u.pop(),h=o(t.text,t.id).appendTo(i(u)),l=t.depth}),c(n)}function t(e,n,t){e.stop(!0).delay(t).animate({opacity:n})}function a(e,n,t){e.stop(!0).delay(t).animate({opacity:n})}function o(n,t){var a=e("<li>");return e("<a>",{href:"#"+t}).text(n).appendTo(a),a}function r(e){return e.toLowerCase().replace(/[ \-]/g,"_").replace(/\./g,"")}function i(e){return e[e.length-1]}e.fn.tokko=function(t){function a(n){return e.extend(!0,{delay:500,minAlpha:.4,maxAlpha:1,anchor:{"class":"anchor",content:"&para;"}},n)}return this.length?this.each(function(){n(e(this),a(t))}):console.error("No element provided to tokko!")}})(jQuery);