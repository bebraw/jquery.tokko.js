(function(n){function t(t,r){function p(n){if(!window.Modernizr||!Modernizr.touch){var t="opacity "+r.duration+"s "+r.delay+"s "+r.easing;n.css({opacity:r.minAlpha,"-webkit-transition":t,"-moz-transition":t,"-ms-transition":t,"-o-transition":t,transition:t}),n.on("mouseenter",e.bind(void 0,n,r.maxAlpha)).on("mouseleave",e.bind(void 0,n,r.minAlpha))}}var c,s=n(":header:not(h1)").map(function(){var t=n(this);parseInt(t.prop("tagName").slice(1),10);var e=t.text(),o=a(e),i=n("<a>",{"class":r.anchor["class"],href:"#"+o}).html(r.anchor.content).appendTo(t);return p(i),t.attr("id",o),t.attr("name",o),{text:e,id:o,depth:parseInt(t.prop("tagName").slice(1),10)}}),h=s[0].depth,d=[t];s.each(function(t,e){e.depth>h?d.push(n("<ul>").appendTo(c)):h>e.depth&&d.pop(),c=o(e.text,e.id).appendTo(i(d)),h=e.depth}),p(t)}function e(n,t){n.css("opacity",t)}function o(t,e){var o=n("<li>");return n("<a>",{href:"#"+e}).text(t).appendTo(o),o}function a(n){return n.toLowerCase().replace(/[ \-]+/g,"_").replace(/\.+/g,"")}function i(n){return n[n.length-1]}n.fn.tokko=function(e){function o(t){return n.extend(!0,{delay:.5,duration:.5,easing:"linear",minAlpha:.4,maxAlpha:1,anchor:{"class":"anchor",content:"&para;"}},t)}return this.length?this.each(function(){t(n(this),o(e))}):console.error("No element provided to tokko!")}})(jQuery);